---
layout: default
title: "Introducing Cordova-JS"
---

<h1>Introducing Cordova-JS</h1>

A lot of exciting things have happened in the past six months or so:
my former employer Nitobi got acquired by Adobe and our team of about 18 more or less got split
right down the middle. Half are now settling into San Francisco, while the rest (me included) are holding down the Canadian fort in Vancouver and doing our best to represent
Adobe up in the Great White North.</p>

<p>I'm still working on PhoneGap, now reborn as an Apache Software Foundation project known as Cordova. My most recent task has involved bringing the disparate
implementations of Cordova's JavaScript API - a consistent, cross-platform API - under one repository. Up until this point, each platform maintained its own
set of JavaScript files implementing the Cordova API. The idea behind the unification into one code base is that 90+ percent of the JavaScript
for any given Cordova platform is identical. Most of the Cordova API boils down to sending simple one-off messages to the native framework, with the
expectation that a failure or success callback will be fired in the future. The unified JavaScript for Cordova project is called cordova-js.</p>

<p>In Cordova 1.5 we landed cordova-js in the Android implmentation. In Cordova 1.6 we are going to drop it into the iOS implementation. The project has been
an up-and-down ride. Dave Johnson and Michael
Brooks initially championed this idea with the phonegap-js project. Since then it's been hijacked by Gord Tanner (and some daleks). I jumped in to help out
where I could. Joe Bowser and Simon MacDonald made it happen on Android. Becky Gibson and Shazron Abdullah put a lot of work in to get it going on iOS. Patrick Mueller
and Brian LeRoux chimed in to offer advice and guidance. Truly a team effort - thanks to everyone for making it happen.</p>

<h2>Why?</h2>

<p>If it works, why f*** with it? The answer lies in the road ahead to Cordova 2.0. We want any arbitrary device APIs - be they Cordova "core" APIs
or not - to be installable, discoverable and removable at a developer's discretion. For those familiar with PhoneGap plugins, this is exactly the same idea. A stock
Cordova API is no different from a plugin. We've been part of the way there for some time now; all of the various native implementations employ some manner of plugin
architecture. The JavaScript, however, has been a wild-west of sorts. We are changing that with the introduction of cordova-js.</p>

<p>The biggest change is the use of modules in JavaScript. CommonJS-inspired but much simpler, it does the job for now. A simple define + require syntax is used and
scoped only to the cordova.js file.</p>

<p>Another interesting feature of this code base is we can use it interchangeable between node and PhoneGap/Cordova contexts. Due to our simple module system for use
in WebView contexts, we can maintain the convention of one-closure-per-file employed in other CommonJS environments, or piggy-back off of node's module system to do
cool things such as run unit tests locally in node. Winning!</p>


TODO:
- Lots to do: better api definition method, platform implementations, native tweaks to line it all up
- link it all up
